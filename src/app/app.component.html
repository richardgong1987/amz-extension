<div class="content" role="main">
  <mat-tab-group>
    <mat-tab label="入札リスト">
      <div class="setup-jobs">
        <button mat-raised-button style="margin-right: 30px;" color="success" (click)="startRefresh()">始める</button>

        <button mat-raised-button style="margin-right: 30px;" color="danger" (click)="stopRefresh()">停止</button>

        <button mat-raised-button color="success" (click)="openAllLinks()"> リンクを開く</button>

      </div>

      <table style="width: 100%">
        <caption style="font-size: 20px;padding: 10px">入札実績を一覧({{dataSource.length}})</caption>
        <thead>
          <tr>
            <th>ID
              <button (click)="deleteSelected()">選択を削除</button>
            </th>
            <th></th>
            <th>終了日時</th>
            <th>最高額入</th>
            <th>状況</th>
            <th>注意事項</th>
            <th>操作する</th>
          </tr>
        </thead>
        <tr *ngFor="let item of dataSource">
          <td>
            <input type="checkbox" style="display: inline-block;vertical-align:middle;" [(ngModel)]="item.checked"/>
            <span style="display: inline-block;vertical-align:middle;">{{item.orderId}}</span>
          </td>
          <td>
            <a [href]="item.url" target="_blank"
               style="text-decoration: underline; border-bottom: #3F51BB solid 1px; display: inline-block;  ">
              <img alt="" style="width: 90px; height: 90px; text-decoration: underline;" [src]="item.info"/>
            </a>
          </td>
          <td style="width: 68px;">{{item.updateTime}}</td>
          <td>
            <input type="number" style="width: 60px;" [(ngModel)]="item.limitPrice"/>
          </td>
          <td>
            <select matNativeControl [(ngModel)]="item.status" name="status">
              <option *ngFor="let v of StatusDict" [value]="v.dictValue">
                {{v.dictLabel}}
              </option>
            </select>
          </td>
          <td>
            <input type="text" style="width: 60px;" [(ngModel)]="item.remark"/>
          </td>
          <td>
            <button style="background: yellowgreen; color: white; margin-right: 30px;" (click)="save(item)">保存
            </button>
            <button style="background: #F24331; color: white;" (click)="delete(item)">消去</button>
          </td>
        </tr>
      </table>

    </mat-tab>
    <mat-tab label="検索条件実績">
      <table style="width: 100%">
        <caption style="font-size: 20px;padding: 10px">検索条件実績を一覧表示</caption>
        <thead>
          <tr>
            <th>検索条件</th>
          </tr>
        </thead>
        <tr *ngFor="let item of IkeyWordsList">
          <td>
            <a [href]="item.url" target="_blank"
               style="text-decoration: underline;  padding: 3px; display: block; font-size: 16px;">
              {{item.keywords}}
            </a>
          </td>
          <td>
            <button mat-raised-button color="warn" (click)="deleteKeyWord(item)">消去</button>
          </td>
        </tr>
      </table>
    </mat-tab>
    <mat-tab label="設定">
      <div class="sync-list">
        <input type="text" [(ngModel)]="productapi" placeholder="api url">
        <button (click)="clickProductApi()">入札リストを同期する</button>
      </div>

      <div class="sync-list">
        <input type="text" [(ngModel)]="keywordapi" placeholder="api url">
        <button (click)="clickKeywordApi()">同期検索条件</button>
      </div>

    </mat-tab>
  </mat-tab-group>
</div>
